{"filter":false,"title":"views.py","tooltip":"/final_proj/newone/babyproducts/views.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":5,"column":87},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":290},{"start":{"row":6,"column":0},"end":{"row":6,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":7,"column":0},"end":{"row":12,"column":12},"action":"remove","lines":["def show_product(request, product_id):","    try:","        product = BabyProduct.objects.get(id=product_id)","        return render(request, 'babyproducts/show.html', {'product': product})","    except BabyProduct.DoesNotExist:","        pass"],"id":291}],[{"start":{"row":7,"column":0},"end":{"row":12,"column":60},"action":"insert","lines":["def show(request, movie_id):","try:","movie = Movie.objects.get(pk=movie_id)","except Movie.DoesNotExist:","raise Http404(\"Movie does not exist\")","return render(request, 'movies/show.html', {'movie': movie})"],"id":292}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":4},"action":"insert","lines":["    "],"id":293}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "],"id":294}],[{"start":{"row":9,"column":4},"end":{"row":9,"column":8},"action":"insert","lines":["    "],"id":295}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":4},"action":"insert","lines":["    "],"id":296}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "],"id":297}],[{"start":{"row":11,"column":4},"end":{"row":11,"column":8},"action":"insert","lines":["    "],"id":298}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "],"id":299}],[{"start":{"row":7,"column":18},"end":{"row":7,"column":23},"action":"remove","lines":["movie"],"id":300}],[{"start":{"row":7,"column":18},"end":{"row":7,"column":19},"action":"insert","lines":["b"],"id":301},{"start":{"row":7,"column":19},"end":{"row":7,"column":20},"action":"insert","lines":["a"]},{"start":{"row":7,"column":20},"end":{"row":7,"column":21},"action":"insert","lines":["b"]},{"start":{"row":7,"column":21},"end":{"row":7,"column":22},"action":"insert","lines":["y"]},{"start":{"row":7,"column":22},"end":{"row":7,"column":23},"action":"insert","lines":["p"]},{"start":{"row":7,"column":23},"end":{"row":7,"column":24},"action":"insert","lines":["r"]},{"start":{"row":7,"column":24},"end":{"row":7,"column":25},"action":"insert","lines":["o"]},{"start":{"row":7,"column":25},"end":{"row":7,"column":26},"action":"insert","lines":["d"]}],[{"start":{"row":7,"column":26},"end":{"row":7,"column":27},"action":"insert","lines":["u"],"id":302},{"start":{"row":7,"column":27},"end":{"row":7,"column":28},"action":"insert","lines":["c"]},{"start":{"row":7,"column":28},"end":{"row":7,"column":29},"action":"insert","lines":["t"]},{"start":{"row":7,"column":29},"end":{"row":7,"column":30},"action":"insert","lines":["s"]}],[{"start":{"row":9,"column":8},"end":{"row":9,"column":13},"action":"remove","lines":["movie"],"id":303}],[{"start":{"row":9,"column":8},"end":{"row":9,"column":9},"action":"insert","lines":["b"],"id":304},{"start":{"row":9,"column":9},"end":{"row":9,"column":10},"action":"insert","lines":["a"]},{"start":{"row":9,"column":10},"end":{"row":9,"column":11},"action":"insert","lines":["b"]},{"start":{"row":9,"column":11},"end":{"row":9,"column":12},"action":"insert","lines":["y"]}],[{"start":{"row":9,"column":8},"end":{"row":9,"column":12},"action":"remove","lines":["baby"],"id":305},{"start":{"row":9,"column":8},"end":{"row":9,"column":20},"action":"insert","lines":["babyproducts"]}],[{"start":{"row":9,"column":23},"end":{"row":9,"column":28},"action":"remove","lines":["Movie"],"id":306}],[{"start":{"row":9,"column":23},"end":{"row":9,"column":24},"action":"insert","lines":["b"],"id":307},{"start":{"row":9,"column":24},"end":{"row":9,"column":25},"action":"insert","lines":["a"]},{"start":{"row":9,"column":25},"end":{"row":9,"column":26},"action":"insert","lines":["b"]},{"start":{"row":9,"column":26},"end":{"row":9,"column":27},"action":"insert","lines":["y"]}],[{"start":{"row":9,"column":23},"end":{"row":9,"column":27},"action":"remove","lines":["baby"],"id":308},{"start":{"row":9,"column":23},"end":{"row":9,"column":35},"action":"insert","lines":["babyproducts"]}],[{"start":{"row":9,"column":51},"end":{"row":9,"column":56},"action":"remove","lines":["movie"],"id":309}],[{"start":{"row":9,"column":51},"end":{"row":9,"column":52},"action":"insert","lines":["b"],"id":310},{"start":{"row":9,"column":52},"end":{"row":9,"column":53},"action":"insert","lines":["a"]},{"start":{"row":9,"column":53},"end":{"row":9,"column":54},"action":"insert","lines":["b"]},{"start":{"row":9,"column":54},"end":{"row":9,"column":55},"action":"insert","lines":["y"]}],[{"start":{"row":9,"column":51},"end":{"row":9,"column":55},"action":"remove","lines":["baby"],"id":311},{"start":{"row":9,"column":51},"end":{"row":9,"column":63},"action":"insert","lines":["babyproducts"]}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":16},"action":"remove","lines":["Movie"],"id":312}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":12},"action":"insert","lines":["b"],"id":313},{"start":{"row":10,"column":12},"end":{"row":10,"column":13},"action":"insert","lines":["a"]},{"start":{"row":10,"column":13},"end":{"row":10,"column":14},"action":"insert","lines":["b"]},{"start":{"row":10,"column":14},"end":{"row":10,"column":15},"action":"insert","lines":["y"]}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":15},"action":"remove","lines":["baby"],"id":314},{"start":{"row":10,"column":11},"end":{"row":10,"column":23},"action":"insert","lines":["babyproducts"]}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":28},"action":"remove","lines":["Movie"],"id":315}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":24},"action":"insert","lines":["b"],"id":316},{"start":{"row":11,"column":24},"end":{"row":11,"column":25},"action":"insert","lines":["a"]},{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"insert","lines":["b"]},{"start":{"row":11,"column":26},"end":{"row":11,"column":27},"action":"insert","lines":["y"]}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":27},"action":"remove","lines":["baby"],"id":317},{"start":{"row":11,"column":23},"end":{"row":11,"column":36},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":11,"column":35},"end":{"row":11,"column":36},"action":"remove","lines":["/"],"id":318}],[{"start":{"row":12,"column":28},"end":{"row":12,"column":34},"action":"remove","lines":["movies"],"id":319}],[{"start":{"row":12,"column":28},"end":{"row":12,"column":29},"action":"insert","lines":["b"],"id":320},{"start":{"row":12,"column":29},"end":{"row":12,"column":30},"action":"insert","lines":["a"]},{"start":{"row":12,"column":30},"end":{"row":12,"column":31},"action":"insert","lines":["b"]},{"start":{"row":12,"column":31},"end":{"row":12,"column":32},"action":"insert","lines":["y"]}],[{"start":{"row":12,"column":28},"end":{"row":12,"column":32},"action":"remove","lines":["baby"],"id":321},{"start":{"row":12,"column":28},"end":{"row":12,"column":41},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":12,"column":41},"end":{"row":12,"column":42},"action":"remove","lines":["/"],"id":322}],[{"start":{"row":12,"column":55},"end":{"row":12,"column":60},"action":"remove","lines":["movie"],"id":323}],[{"start":{"row":12,"column":55},"end":{"row":12,"column":56},"action":"insert","lines":["b"],"id":324},{"start":{"row":12,"column":56},"end":{"row":12,"column":57},"action":"insert","lines":["a"]},{"start":{"row":12,"column":57},"end":{"row":12,"column":58},"action":"insert","lines":["b"]},{"start":{"row":12,"column":58},"end":{"row":12,"column":59},"action":"insert","lines":["y"]}],[{"start":{"row":12,"column":55},"end":{"row":12,"column":59},"action":"remove","lines":["baby"],"id":325},{"start":{"row":12,"column":55},"end":{"row":12,"column":68},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":12,"column":67},"end":{"row":12,"column":68},"action":"remove","lines":["/"],"id":326}],[{"start":{"row":12,"column":70},"end":{"row":12,"column":75},"action":"remove","lines":["movie"],"id":327}],[{"start":{"row":12,"column":70},"end":{"row":12,"column":71},"action":"insert","lines":["b"],"id":328},{"start":{"row":12,"column":71},"end":{"row":12,"column":72},"action":"insert","lines":["a"]},{"start":{"row":12,"column":72},"end":{"row":12,"column":73},"action":"insert","lines":["b"]},{"start":{"row":12,"column":73},"end":{"row":12,"column":74},"action":"insert","lines":["y"]}],[{"start":{"row":12,"column":70},"end":{"row":12,"column":74},"action":"remove","lines":["baby"],"id":329},{"start":{"row":12,"column":70},"end":{"row":12,"column":82},"action":"insert","lines":["babyproducts"]}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":330}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":31},"action":"insert","lines":["from django.http import Http404"],"id":331}],[{"start":{"row":0,"column":0},"end":{"row":13,"column":84},"action":"remove","lines":["from django.http import Http404","from django.shortcuts import render","from .models import babyproducts","","def index(request):","    baby_products = babyproducts.objects.all()","    return render(request, 'babyproducts/index.html', {'baby_products': baby_products})","    ","def show(request, babyproducts_id):","    try:","        babyproducts = babyproducts.objects.get(pk=babyproducts_id)","    except babyproducts.DoesNotExist:","        raise Http404(\"babyproducts does not exist\")","    return render(request, 'babyproducts/show.html', {'babyproducts': babyproducts})"],"id":332}],[{"start":{"row":0,"column":0},"end":{"row":14,"column":0},"action":"insert","lines":["from django.http import Http404","from django.shortcuts import render","from .models import BabyProduct","","def index(request):","    baby_products = BabyProduct.objects.all()","    return render(request, 'babyproducts/index.html', {'baby_products': baby_products})","    ","def show(request, babyproduct_id):","    try:","        baby_product = BabyProduct.objects.get(pk=babyproduct_id)","    except BabyProduct.DoesNotExist:","        raise Http404(\"Baby Product does not exist\")","    return render(request, 'babyproducts/show.html', {'baby_product': baby_product})",""],"id":333}],[{"start":{"row":0,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["from django.http import Http404","from django.shortcuts import render","from .models import BabyProduct","","def index(request):","    baby_products = BabyProduct.objects.all()","    return render(request, 'babyproducts/index.html', {'baby_products': baby_products})","    ","def show(request, babyproduct_id):","    try:","        baby_product = BabyProduct.objects.get(pk=babyproduct_id)","    except BabyProduct.DoesNotExist:","        raise Http404(\"Baby Product does not exist\")","    return render(request, 'babyproducts/show.html', {'baby_product': baby_product})",""],"id":334}],[{"start":{"row":0,"column":0},"end":{"row":51,"column":80},"action":"insert","lines":["from django.shortcuts import render, redirect","from django.contrib import messages","from .models import Product, CartItem, Order","from .forms import ProductForm","from django.contrib.auth.decorators import login_required"," ","def product_list(request):","    products = Product.objects.all()","    return render(request, 'pet_products/product_list.html', {'products': products})"," ","def add_product(request):","    if request.method == 'POST':","        form = ProductForm(request.POST, request.FILES)","        if form.is_valid():","            form.save()","            return redirect('pet_products:pet_products')","    else:","        form = ProductForm()","    return render(request, 'pet_products/add_product.html', {'form': form})"," ","@login_required","def add_to_cart(request, product_id):","    if not request.user.is_authenticated:","        messages.warning(request, 'Please log in to add items to your cart.')","        return redirect('users:sign_in')"," ","    product = Product.objects.get(pk=product_id)","    cart_item, created = CartItem.objects.get_or_create(user=request.user, product=product)"," ","    if not created:","        cart_item.quantity += 1","        cart_item.save()"," ","    return redirect('pet_products:view_cart')"," ","@login_required","def place_order(request):","    cart_items = CartItem.objects.filter(user=request.user)","    if cart_items:","        order = Order.objects.create(user=request.user)","        order.items.set(cart_items)"," ","        messages.success(request, \"Your order has been placed. Please collect your products within 4 hours to 1 day.\")"," ","        # Clear the user's cart","        cart_items.delete()"," ","    return redirect('pet_products:pet_products')"," ","def view_cart(request):","    cart_items = CartItem.objects.filter(user=request.user)","    return render(request, 'pet_products/cart.html', {'cart_items': cart_items})"],"id":335}],[{"start":{"row":8,"column":28},"end":{"row":8,"column":40},"action":"remove","lines":["pet_products"],"id":336}],[{"start":{"row":8,"column":28},"end":{"row":8,"column":29},"action":"insert","lines":["b"],"id":337},{"start":{"row":8,"column":29},"end":{"row":8,"column":30},"action":"insert","lines":["a"]},{"start":{"row":8,"column":30},"end":{"row":8,"column":31},"action":"insert","lines":["b"]}],[{"start":{"row":8,"column":28},"end":{"row":8,"column":31},"action":"remove","lines":["bab"],"id":338},{"start":{"row":8,"column":28},"end":{"row":8,"column":41},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":8,"column":41},"end":{"row":8,"column":42},"action":"remove","lines":["/"],"id":339}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":41},"action":"remove","lines":["pet_products"],"id":340}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":["a"],"id":341},{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"insert","lines":["b"]},{"start":{"row":15,"column":31},"end":{"row":15,"column":32},"action":"insert","lines":["b"]}],[{"start":{"row":15,"column":31},"end":{"row":15,"column":32},"action":"remove","lines":["b"],"id":342},{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"remove","lines":["b"]},{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"remove","lines":["a"]}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":["b"],"id":343},{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"insert","lines":["a"]},{"start":{"row":15,"column":31},"end":{"row":15,"column":32},"action":"insert","lines":["b"]},{"start":{"row":15,"column":32},"end":{"row":15,"column":33},"action":"insert","lines":["y"]}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":33},"action":"remove","lines":["baby"],"id":344},{"start":{"row":15,"column":29},"end":{"row":15,"column":42},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":15,"column":41},"end":{"row":15,"column":42},"action":"remove","lines":["/"],"id":345}],[{"start":{"row":15,"column":42},"end":{"row":15,"column":54},"action":"remove","lines":["pet_products"],"id":346}],[{"start":{"row":15,"column":42},"end":{"row":15,"column":43},"action":"insert","lines":["b"],"id":347},{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"insert","lines":["a"]},{"start":{"row":15,"column":44},"end":{"row":15,"column":45},"action":"insert","lines":["b"]},{"start":{"row":15,"column":45},"end":{"row":15,"column":46},"action":"insert","lines":["y"]},{"start":{"row":15,"column":46},"end":{"row":15,"column":47},"action":"insert","lines":["p"]}],[{"start":{"row":15,"column":47},"end":{"row":15,"column":48},"action":"insert","lines":["r"],"id":348},{"start":{"row":15,"column":48},"end":{"row":15,"column":49},"action":"insert","lines":["o"]},{"start":{"row":15,"column":49},"end":{"row":15,"column":50},"action":"insert","lines":["d"]},{"start":{"row":15,"column":50},"end":{"row":15,"column":51},"action":"insert","lines":["u"]},{"start":{"row":15,"column":51},"end":{"row":15,"column":52},"action":"insert","lines":["c"]},{"start":{"row":15,"column":52},"end":{"row":15,"column":53},"action":"insert","lines":["t"]},{"start":{"row":15,"column":53},"end":{"row":15,"column":54},"action":"insert","lines":["s"]}],[{"start":{"row":18,"column":28},"end":{"row":18,"column":40},"action":"remove","lines":["pet_products"],"id":349}],[{"start":{"row":18,"column":28},"end":{"row":18,"column":29},"action":"insert","lines":["b"],"id":350},{"start":{"row":18,"column":29},"end":{"row":18,"column":30},"action":"insert","lines":["a"]},{"start":{"row":18,"column":30},"end":{"row":18,"column":31},"action":"insert","lines":["b"]},{"start":{"row":18,"column":31},"end":{"row":18,"column":32},"action":"insert","lines":["y"]}],[{"start":{"row":18,"column":28},"end":{"row":18,"column":32},"action":"remove","lines":["baby"],"id":351},{"start":{"row":18,"column":28},"end":{"row":18,"column":41},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":18,"column":40},"end":{"row":18,"column":41},"action":"remove","lines":["/"],"id":352}],[{"start":{"row":33,"column":21},"end":{"row":33,"column":33},"action":"remove","lines":["pet_products"],"id":353}],[{"start":{"row":33,"column":21},"end":{"row":33,"column":22},"action":"insert","lines":["b"],"id":354},{"start":{"row":33,"column":22},"end":{"row":33,"column":23},"action":"insert","lines":["a"]},{"start":{"row":33,"column":23},"end":{"row":33,"column":24},"action":"insert","lines":["b"]},{"start":{"row":33,"column":24},"end":{"row":33,"column":25},"action":"insert","lines":["y"]}],[{"start":{"row":33,"column":21},"end":{"row":33,"column":25},"action":"remove","lines":["baby"],"id":355},{"start":{"row":33,"column":21},"end":{"row":33,"column":34},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":33,"column":33},"end":{"row":33,"column":34},"action":"remove","lines":["/"],"id":356}],[{"start":{"row":42,"column":63},"end":{"row":42,"column":115},"action":"remove","lines":["Please collect your products within 4 hours to 1 day"],"id":357}],[{"start":{"row":42,"column":63},"end":{"row":42,"column":64},"action":"insert","lines":["W"],"id":358},{"start":{"row":42,"column":64},"end":{"row":42,"column":65},"action":"insert","lines":["e"]}],[{"start":{"row":42,"column":65},"end":{"row":42,"column":66},"action":"insert","lines":[" "],"id":359},{"start":{"row":42,"column":66},"end":{"row":42,"column":67},"action":"insert","lines":["a"]},{"start":{"row":42,"column":67},"end":{"row":42,"column":68},"action":"insert","lines":["r"]},{"start":{"row":42,"column":68},"end":{"row":42,"column":69},"action":"insert","lines":["e"]}],[{"start":{"row":42,"column":69},"end":{"row":42,"column":70},"action":"insert","lines":[" "],"id":360}],[{"start":{"row":42,"column":70},"end":{"row":42,"column":71},"action":"insert","lines":["w"],"id":361},{"start":{"row":42,"column":71},"end":{"row":42,"column":72},"action":"insert","lines":["a"]},{"start":{"row":42,"column":72},"end":{"row":42,"column":73},"action":"insert","lines":["i"]},{"start":{"row":42,"column":73},"end":{"row":42,"column":74},"action":"insert","lines":["t"]},{"start":{"row":42,"column":74},"end":{"row":42,"column":75},"action":"insert","lines":["i"]},{"start":{"row":42,"column":75},"end":{"row":42,"column":76},"action":"insert","lines":["n"]},{"start":{"row":42,"column":76},"end":{"row":42,"column":77},"action":"insert","lines":["g"]}],[{"start":{"row":42,"column":77},"end":{"row":42,"column":78},"action":"insert","lines":[" "],"id":362},{"start":{"row":42,"column":78},"end":{"row":42,"column":79},"action":"insert","lines":["f"]},{"start":{"row":42,"column":79},"end":{"row":42,"column":80},"action":"insert","lines":["o"]},{"start":{"row":42,"column":80},"end":{"row":42,"column":81},"action":"insert","lines":["r"]}],[{"start":{"row":42,"column":81},"end":{"row":42,"column":82},"action":"insert","lines":[" "],"id":363},{"start":{"row":42,"column":82},"end":{"row":42,"column":83},"action":"insert","lines":["y"]},{"start":{"row":42,"column":83},"end":{"row":42,"column":84},"action":"insert","lines":["o"]},{"start":{"row":42,"column":84},"end":{"row":42,"column":85},"action":"insert","lines":["u"]},{"start":{"row":42,"column":85},"end":{"row":42,"column":86},"action":"insert","lines":["r"]}],[{"start":{"row":42,"column":86},"end":{"row":42,"column":87},"action":"insert","lines":[" "],"id":364},{"start":{"row":42,"column":87},"end":{"row":42,"column":88},"action":"insert","lines":["a"]},{"start":{"row":42,"column":88},"end":{"row":42,"column":89},"action":"insert","lines":["r"]},{"start":{"row":42,"column":89},"end":{"row":42,"column":90},"action":"insert","lines":["r"]},{"start":{"row":42,"column":90},"end":{"row":42,"column":91},"action":"insert","lines":["i"]},{"start":{"row":42,"column":91},"end":{"row":42,"column":92},"action":"insert","lines":["v"]},{"start":{"row":42,"column":92},"end":{"row":42,"column":93},"action":"insert","lines":["a"]},{"start":{"row":42,"column":93},"end":{"row":42,"column":94},"action":"insert","lines":["l"]}],[{"start":{"row":42,"column":94},"end":{"row":42,"column":95},"action":"insert","lines":[" "],"id":365}],[{"start":{"row":42,"column":95},"end":{"row":42,"column":96},"action":"insert","lines":["o"],"id":366},{"start":{"row":42,"column":96},"end":{"row":42,"column":97},"action":"insert","lines":["n"]}],[{"start":{"row":42,"column":97},"end":{"row":42,"column":98},"action":"insert","lines":[" "],"id":367},{"start":{"row":42,"column":98},"end":{"row":42,"column":99},"action":"insert","lines":["t"]},{"start":{"row":42,"column":99},"end":{"row":42,"column":100},"action":"insert","lines":["h"]},{"start":{"row":42,"column":100},"end":{"row":42,"column":101},"action":"insert","lines":["e"]}],[{"start":{"row":42,"column":101},"end":{"row":42,"column":102},"action":"insert","lines":[" "],"id":368},{"start":{"row":42,"column":102},"end":{"row":42,"column":103},"action":"insert","lines":["s"]},{"start":{"row":42,"column":103},"end":{"row":42,"column":104},"action":"insert","lines":["t"]},{"start":{"row":42,"column":104},"end":{"row":42,"column":105},"action":"insert","lines":["o"]},{"start":{"row":42,"column":105},"end":{"row":42,"column":106},"action":"insert","lines":["r"]}],[{"start":{"row":42,"column":106},"end":{"row":42,"column":107},"action":"insert","lines":["e"],"id":369}],[{"start":{"row":47,"column":21},"end":{"row":47,"column":33},"action":"remove","lines":["pet_products"],"id":370}],[{"start":{"row":47,"column":21},"end":{"row":47,"column":22},"action":"insert","lines":["b"],"id":371},{"start":{"row":47,"column":22},"end":{"row":47,"column":23},"action":"insert","lines":["a"]},{"start":{"row":47,"column":23},"end":{"row":47,"column":24},"action":"insert","lines":["b"]},{"start":{"row":47,"column":24},"end":{"row":47,"column":25},"action":"insert","lines":["y"]}],[{"start":{"row":47,"column":21},"end":{"row":47,"column":25},"action":"remove","lines":["baby"],"id":372},{"start":{"row":47,"column":21},"end":{"row":47,"column":34},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":47,"column":33},"end":{"row":47,"column":34},"action":"remove","lines":["/"],"id":373}],[{"start":{"row":47,"column":34},"end":{"row":47,"column":46},"action":"remove","lines":["pet_products"],"id":374}],[{"start":{"row":47,"column":34},"end":{"row":47,"column":35},"action":"insert","lines":["b"],"id":375},{"start":{"row":47,"column":35},"end":{"row":47,"column":36},"action":"insert","lines":["a"]},{"start":{"row":47,"column":36},"end":{"row":47,"column":37},"action":"insert","lines":["b"]},{"start":{"row":47,"column":37},"end":{"row":47,"column":38},"action":"insert","lines":["y"]},{"start":{"row":47,"column":38},"end":{"row":47,"column":39},"action":"insert","lines":["p"]},{"start":{"row":47,"column":39},"end":{"row":47,"column":40},"action":"insert","lines":["r"]}],[{"start":{"row":47,"column":40},"end":{"row":47,"column":41},"action":"insert","lines":["o"],"id":376},{"start":{"row":47,"column":41},"end":{"row":47,"column":42},"action":"insert","lines":["d"]},{"start":{"row":47,"column":42},"end":{"row":47,"column":43},"action":"insert","lines":["u"]},{"start":{"row":47,"column":43},"end":{"row":47,"column":44},"action":"insert","lines":["c"]},{"start":{"row":47,"column":44},"end":{"row":47,"column":45},"action":"insert","lines":["t"]},{"start":{"row":47,"column":45},"end":{"row":47,"column":46},"action":"insert","lines":["s"]}],[{"start":{"row":51,"column":28},"end":{"row":51,"column":40},"action":"remove","lines":["pet_products"],"id":377}],[{"start":{"row":51,"column":28},"end":{"row":51,"column":29},"action":"insert","lines":["b"],"id":378},{"start":{"row":51,"column":29},"end":{"row":51,"column":30},"action":"insert","lines":["a"]},{"start":{"row":51,"column":30},"end":{"row":51,"column":31},"action":"insert","lines":["b"]},{"start":{"row":51,"column":31},"end":{"row":51,"column":32},"action":"insert","lines":["y"]}],[{"start":{"row":51,"column":28},"end":{"row":51,"column":32},"action":"remove","lines":["baby"],"id":379},{"start":{"row":51,"column":28},"end":{"row":51,"column":41},"action":"insert","lines":["babyproducts/"]}],[{"start":{"row":51,"column":40},"end":{"row":51,"column":41},"action":"remove","lines":["/"],"id":380}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":27},"action":"remove","lines":["Product"],"id":381},{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"insert","lines":["B"]},{"start":{"row":2,"column":21},"end":{"row":2,"column":22},"action":"insert","lines":["a"]},{"start":{"row":2,"column":22},"end":{"row":2,"column":23},"action":"insert","lines":["b"]}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":23},"action":"remove","lines":["Bab"],"id":382},{"start":{"row":2,"column":20},"end":{"row":2,"column":31},"action":"insert","lines":["Babyproduct"]}],[{"start":{"row":7,"column":15},"end":{"row":7,"column":22},"action":"remove","lines":["Product"],"id":383},{"start":{"row":7,"column":15},"end":{"row":7,"column":26},"action":"insert","lines":["Babyproduct"]}],[{"start":{"row":8,"column":48},"end":{"row":8,"column":49},"action":"insert","lines":["s"],"id":384}],[{"start":{"row":0,"column":0},"end":{"row":51,"column":80},"action":"remove","lines":["from django.shortcuts import render, redirect","from django.contrib import messages","from .models import Babyproduct, CartItem, Order","from .forms import ProductForm","from django.contrib.auth.decorators import login_required"," ","def product_list(request):","    products = Babyproduct.objects.all()","    return render(request, 'babyproducts/products_list.html', {'products': products})"," ","def add_product(request):","    if request.method == 'POST':","        form = ProductForm(request.POST, request.FILES)","        if form.is_valid():","            form.save()","            return redirect('babyproducts:babyproducts')","    else:","        form = ProductForm()","    return render(request, 'babyproducts/add_product.html', {'form': form})"," ","@login_required","def add_to_cart(request, product_id):","    if not request.user.is_authenticated:","        messages.warning(request, 'Please log in to add items to your cart.')","        return redirect('users:sign_in')"," ","    product = Product.objects.get(pk=product_id)","    cart_item, created = CartItem.objects.get_or_create(user=request.user, product=product)"," ","    if not created:","        cart_item.quantity += 1","        cart_item.save()"," ","    return redirect('babyproducts:view_cart')"," ","@login_required","def place_order(request):","    cart_items = CartItem.objects.filter(user=request.user)","    if cart_items:","        order = Order.objects.create(user=request.user)","        order.items.set(cart_items)"," ","        messages.success(request, \"Your order has been placed. We are waiting for your arrival on the store.\")"," ","        # Clear the user's cart","        cart_items.delete()"," ","    return redirect('babyproducts:babyproducts')"," ","def view_cart(request):","    cart_items = CartItem.objects.filter(user=request.user)","    return render(request, 'babyproducts/cart.html', {'cart_items': cart_items})"],"id":385}],[{"start":{"row":0,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["from django.shortcuts import render, redirect","from django.contrib import messages","from .models import Babyproduct, CartItem, Order","from .forms import ProductForm","from django.contrib.auth.decorators import login_required","from django.contrib.auth import get_user_model","","User = get_user_model()  # Import the custom user model","","def product_list(request):","    products = Babyproduct.objects.all()","    return render(request, 'babyproducts/products_list.html', {'products': products})","","def add_product(request):","    if request.method == 'POST':","        form = ProductForm(request.POST, request.FILES)","        if form.is_valid():","            form.save()","            return redirect('babyproducts:product_list')","    else:","        form = ProductForm()","    return render(request, 'babyproducts/add_product.html', {'form': form})","","@login_required","def add_to_cart(request, product_id):","    if not request.user.is_authenticated:","        messages.warning(request, 'Please log in to add items to your cart.')","        return redirect('users:sign_in')","","    product = Babyproduct.objects.get(pk=product_id)  # Use Babyproduct model","    cart_item, created = CartItem.objects.get_or_create(user=request.user, product=product)","","    if not created:","        cart_item.quantity += 1","        cart_item.save()","","    return redirect('babyproducts:view_cart')","","@login_required","def place_order(request):","    cart_items = CartItem.objects.filter(user=request.user)","    if cart_items:","        order = Order.objects.create(user=request.user)","        order.items.set(cart_items)","","        messages.success(request, \"Your order has been placed. We are waiting for your arrival on the store.\")","","        # Clear the user's cart","        cart_items.delete()","","    return redirect('babyproducts:product_list')","","@login_required","def view_cart(request):","    cart_items = CartItem.objects.filter(user=request.user)","    return render(request, 'babyproducts/cart.html', {'cart_items': cart_items})",""],"id":386}],[{"start":{"row":7,"column":24},"end":{"row":7,"column":25},"action":"remove","lines":[" "],"id":387},{"start":{"row":7,"column":24},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":9,"column":0},"end":{"row":10,"column":53},"action":"insert","lines":["def index(request):","    return render(request, 'babyproducts/index.html')"],"id":391}],[{"start":{"row":0,"column":0},"end":{"row":59,"column":0},"action":"remove","lines":["from django.shortcuts import render, redirect","from django.contrib import messages","from .models import Babyproduct, CartItem, Order","from .forms import ProductForm","from django.contrib.auth.decorators import login_required","from django.contrib.auth import get_user_model","","User = get_user_model() ","","def index(request):","    return render(request, 'babyproducts/index.html')# Import the custom user model","","def product_list(request):","    products = Babyproduct.objects.all()","    return render(request, 'babyproducts/products_list.html', {'products': products})","","def add_product(request):","    if request.method == 'POST':","        form = ProductForm(request.POST, request.FILES)","        if form.is_valid():","            form.save()","            return redirect('babyproducts:product_list')","    else:","        form = ProductForm()","    return render(request, 'babyproducts/add_product.html', {'form': form})","","@login_required","def add_to_cart(request, product_id):","    if not request.user.is_authenticated:","        messages.warning(request, 'Please log in to add items to your cart.')","        return redirect('users:sign_in')","","    product = Babyproduct.objects.get(pk=product_id)  # Use Babyproduct model","    cart_item, created = CartItem.objects.get_or_create(user=request.user, product=product)","","    if not created:","        cart_item.quantity += 1","        cart_item.save()","","    return redirect('babyproducts:view_cart')","","@login_required","def place_order(request):","    cart_items = CartItem.objects.filter(user=request.user)","    if cart_items:","        order = Order.objects.create(user=request.user)","        order.items.set(cart_items)","","        messages.success(request, \"Your order has been placed. We are waiting for your arrival on the store.\")","","        # Clear the user's cart","        cart_items.delete()","","    return redirect('babyproducts:product_list')","","@login_required","def view_cart(request):","    cart_items = CartItem.objects.filter(user=request.user)","    return render(request, 'babyproducts/cart.html', {'cart_items': cart_items})",""],"id":392}],[{"start":{"row":0,"column":0},"end":{"row":66,"column":0},"action":"insert","lines":["from django.shortcuts import render, redirect, get_object_or_404","from django.contrib import messages","from .models import Babyproduct, CartItem, Order","from .forms import ProductForm","from django.contrib.auth.decorators import login_required","from django.contrib.auth import get_user_model","","User = get_user_model()","","def index(request):","    return render(request, 'babyproducts/index.html')","","def product_list(request):","    products = Babyproduct.objects.all()","    return render(request, 'babyproducts/products_list.html', {'products': products})","","def add_product(request):","    if request.method == 'POST':","        form = ProductForm(request.POST, request.FILES)","        if form.is_valid():","            form.save()","            return redirect('babyproducts:product_list')","    else:","        form = ProductForm()","    return render(request, 'babyproducts/add_product.html', {'form': form})","","@login_required","def add_to_cart(request, product_id):","    if not request.user.is_authenticated:","        messages.warning(request, 'Please log in to add items to your cart.')","        return redirect('users:sign_in')","","    product = Babyproduct.objects.get(pk=product_id)","    cart_item, created = CartItem.objects.get_or_create(user=request.user, product=product)","","    if not created:","        cart_item.quantity += 1","        cart_item.save()","","    return redirect('babyproducts:view_cart')","","@login_required","def place_order(request):","    cart_items = CartItem.objects.filter(user=request.user)","    if cart_items:","        order = Order.objects.create(user=request.user)","        order.items.set(cart_items)","","        messages.success(request, \"Your order has been placed. We are waiting for your arrival on the store.\")","","        # Clear the user's cart","        cart_items.delete()","","    return redirect('babyproducts:product_list')","","@login_required","def view_cart(request):","    cart_items = CartItem.objects.filter(user=request.user)","    return render(request, 'babyproducts/cart.html', {'cart_items': cart_items})","","@login_required","def remove_from_cart(request, cart_item_id):","    cart_item = get_object_or_404(CartItem, id=cart_item_id, user=request.user)","    cart_item.delete()","    messages.success(request, f\"{cart_item.product.name} has been removed from your cart.\")","    return redirect('babyproducts:view_cart')",""],"id":393}]]},"ace":{"folds":[],"scrolltop":89.39999999999988,"scrollleft":0,"selection":{"start":{"row":66,"column":0},"end":{"row":66,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":81,"mode":"ace/mode/python"}},"timestamp":1699634754357,"hash":"fc806079e5d7eeb13df135b47b051486cf5ecf5c"}